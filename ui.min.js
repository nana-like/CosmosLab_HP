/**
 * -----------------------------------------------
 * Project: COSMOS LAB HOMEPAGE
 * Author: Nana <nykim@nykim.net>
 * Last Modified: 2021-09-13 17:04:21
 * -----------------------------------------------
 */

gsap.registerPlugin(ScrollToPlugin,ScrollTrigger);var scrollPosition,$header=$(".header"),$body=$("body"),scrollBarWidth=getScrollBarWidth();function getScrollBarWidth(){$body.css("overflow","hidden");var e=$body.innerWidth();return $body.css("overflow","scroll"),e=(e-=$body.innerWidth())||$body.width()-$body.innerWidth(),$body.css("overflow",""),e}function preventScroll(){if($(document).height()<=$(window).height())return!1;scrollPosition=window.pageYOffset||document.documentElement.scrollTop,$body.css({overflow:"hidden","padding-right":scrollBarWidth+"px"}),$(".header__inner").css("margin-right",0+scrollBarWidth+"px")}function allowScroll(){$body.css({overflow:"","padding-right":""}),$(".header__inner").css("margin-right",""),window.scrollTo(0,scrollPosition)}function openPopup(e){e.preventDefault(),preventScroll();e=$(this).data("popup");$(this).addClass("is-active"),$(".lp-"+e).addClass("is-opened")}function closePopup(e){e.preventDefault(),$(".lp.is-opened").removeClass("is-opened"),$(".points__button").removeClass("is-active"),setTimeout(allowScroll,300)}$("[data-popup").on("click",openPopup),$(".lp__close").on("click",closePopup),$(".lp__dim").on("click",closePopup),1<navigator.maxTouchPoints&&($body.addClass("is-mobile"),ScrollTrigger.config({autoRefreshEvents:"visibilitychange,DOMContentLoaded,load"}));var headerMenuTween,headerLnagTween,breakPoint=1024,isTabletSize=function(){return window.innerWidth<breakPoint},tabletEvt=function(){window.innerWidth<breakPoint?$body.addClass("mq-mobile"):($header.hasClass("is-opened")&&($header.removeClass("is-opened"),allowScroll()),$body.removeClass("mq-mobile"))};function setNavHeight(){var e=$(window).innerHeight();$(".header__nav").css("height",e-68)}$(".burger").on("click",function(){$(".mq-mobile .header").toggleClass("is-opened"),$("body").hasClass("mq-mobile")&&$(".header").hasClass("is-opened")?(preventScroll(),gsap.isTweening(".header__menu-link")&&(headerMenuTween.progress(1),headerLnagTween.progress(1)),headerMenuTween=gsap.fromTo(".header__menu-link",{autoAlpha:0,y:20},{autoAlpha:1,delay:.3,y:0,duration:.45,stagger:.25}),headerLnagTween=gsap.fromTo(".header__lang",{autoAlpha:0,y:20},{autoAlpha:1,y:0,delay:1,duration:.45})):allowScroll()});var resizeHandler=function(){tabletEvt()},loadHandler=function(){tabletEvt()};window.addEventListener("resize",resizeHandler),window.addEventListener("load",loadHandler);
var headerHeight,showcaseImgs=document.querySelectorAll(".showcase__img"),showcaseSpans=document.querySelectorAll(".sc-span"),showcaseSpans_M=document.querySelectorAll(".sc-span-mo"),showcasePaths=document.querySelectorAll(".sc-path"),showcaseDots=document.querySelectorAll(".sc-dot"),showcasePoints=document.querySelectorAll(".points__button");function getheaderHeight(){return headerHeight=isTabletSize()?68:100}function pathPrepare(t){var a=t.getTotalLength();t.style.strokeDasharray=a+10,t.style.strokeDashoffset=a+10}gsap.delayedCall(1,function(){ScrollTrigger.refresh()}),showcasePaths.forEach(function(t){pathPrepare(t)});var videoElem=document.getElementById("video");function playVideo(){videoElem.play()}function pauseVideo(){videoElem.pause()}var intro=gsap.timeline();function showIntro(){intro.to(".visual__title em",{ease:"power4",y:0,opacity:1,duration:2.2,stagger:.3,delay:.2}).to(".visual__link",{opacity:1},"-=1")}gsap.set(".visual__title em",{opacity:0,y:"100%"}),gsap.set(".visual__link",{opacity:0});var visualPlayer=document.querySelector("#player"),visual_animation=gsap.timeline({scrollTrigger:{trigger:".visual",scrub:1,start:"0 0"}});visual_animation.to(".visual__text",{opacity:0,duration:.5}).to(".visual__player",{z:80,duration:1},0).to(".visual__player",{opacity:0,duration:.6},0);var sc_title=gsap.timeline();sc_title.from(".sc-title-1",{opacity:0,y:80},0),sc_title.from(".sc-title-2",{opacity:0,y:80,delay:.2},0),gsap.set(showcaseImgs[0],{scale:1.3,opacity:0,y:50}),gsap.set(showcaseImgs[1],{opacity:0,x:-20}),gsap.set(showcaseImgs[2],{opacity:0,x:-40}),gsap.set(showcaseImgs[3],{opacity:0,x:-60}),gsap.set(showcaseImgs[4],{opacity:0,x:-80}),gsap.set(showcaseImgs[5],{opacity:0,x:-100}),gsap.set(showcaseImgs[6],{opacity:0,x:-120}),gsap.set(showcaseSpans[0],{opacity:0,x:10}),gsap.set(showcaseSpans[1],{opacity:0,x:-10}),gsap.set(showcaseSpans[2],{opacity:0,x:-10}),gsap.set(showcaseSpans[3],{opacity:0,x:10}),gsap.set(showcaseDots[0],{opacity:0}),gsap.set(showcaseDots[1],{opacity:0}),gsap.set(showcaseDots[2],{opacity:0}),gsap.set(showcaseDots[3],{opacity:0});var battery_animation,sc_img_trigger,sc_img=gsap.timeline(),sc_img_m=gsap.timeline();ScrollTrigger.matchMedia({"( min-width: 1024px )":function(){sc_img.addLabel("start").to(showcaseImgs[0],{opacity:1,y:0,duration:.9}).addLabel("show_0").to(showcaseImgs[0],{scale:1,x:-208}).to(showcaseDots[0],{opacity:1}).set(showcaseDots[0],{className:"sc-dot is-active"},"-=0.3").to(showcasePaths[0],{opacity:1,strokeDashoffset:0},"-=0.3").to(showcaseSpans[0],{opacity:1,x:0},"-=0.2").set(showcaseDots[0],{className:"sc-dot"}).addLabel("show_1").to(showcaseImgs[1],{opacity:1,y:0,x:0},"-=0.6").to(showcaseDots[1],{opacity:1},"-=0.3").set(showcaseDots[1],{className:"sc-dot is-active"},"-=0.3").to(showcasePaths[1],{opacity:1,strokeDashoffset:0},"-=0.3").to(showcaseSpans[1],{opacity:1,x:0},"-=0.2").set(showcaseDots[1],{className:"sc-dot"}).addLabel("show_2").to(showcaseImgs[2],{opacity:1,x:-0},"-=0.6").to(showcaseDots[2],{opacity:1},"-=0.3").to(showcasePaths[2],{opacity:1,strokeDashoffset:0},"-=0.3").set(showcaseDots[2],{className:"sc-dot is-active"},"-=0.3").to(showcaseSpans[2],{opacity:1,x:0},"-=0.2").set(showcaseDots[2],{className:"sc-dot"}).addLabel("show_3").to(showcaseDots[3],{opacity:1},"-=0.3").to(showcasePaths[3],{opacity:1,strokeDashoffset:0},"-=0.3").set(showcaseDots[3],{className:"sc-dot is-active"},"-=0.3").to(showcaseImgs[3],{opacity:1,x:0},"-=0.6").to(showcaseSpans[3],{opacity:1,x:0},"-=0.2").set(showcaseDots[3],{className:"sc-dot"}).addLabel("show_4").to(showcaseImgs[4],{opacity:1,x:0},"-=0.4").addLabel("show_5").to(showcaseImgs[5],{opacity:1,x:0},"-=0.4").addLabel("show_6").to(showcaseImgs[6],{opacity:1,x:0},"-=0.4").addLabel("points").set(".points__list",{className:"points__list on"},"-=0.2").addLabel("jump"),battery_animation=gsap.timeline({scrollTrigger:{trigger:".showcase",scrub:1,pin:!0,start:()=>"0 "+getheaderHeight(),end:"bottom -=20%"}}),ScrollTrigger.create({animation:sc_title,trigger:".showcase__title",scrub:1,start:"top 80%",end:"bottom 60%",ease:"back(2)"}),sc_img_trigger=ScrollTrigger.create({animation:sc_img,trigger:".showcase__main",scrub:1,start:"top 70%",end:"bottom -=20%"})},"( max-width: 1024px )":function(){sc_img_m.addLabel("start").to(showcaseImgs[0],{opacity:1,y:0,duration:.9}).addLabel("show_0").fromTo(showcaseImgs[0],{scale:1.3},{scale:1,x:-208}).to(showcaseImgs[1],{opacity:1,x:0,duration:.4}).to(showcaseImgs[2],{opacity:1,x:0,duration:.4},"-=0.35").to(showcaseImgs[3],{opacity:1,x:0,duration:.4},"-=0.35").to(showcaseImgs[4],{opacity:1,x:0,duration:.4},"-=0.35").to(showcaseImgs[5],{opacity:1,x:0,duration:.4},"-=0.35").to(showcaseImgs[6],{opacity:1,x:0,duration:.4},"-=0.35").from(showcaseSpans_M[0],{opacity:0,x:10,duration:.6},"-=0.3").from(showcaseSpans_M[1],{opacity:0,x:10,duration:.6},"-=0.35").from(showcaseSpans_M[2],{opacity:0,x:10,duration:.6},"-=0.35").from(showcaseSpans_M[3],{opacity:0,x:10,duration:.6},"-=0.35").addLabel("jump"),ScrollTrigger.create({animation:sc_title,trigger:".showcase",start:"top 60%",ease:"power1.out",toggleActions:"play reverse play reverse"}),ScrollTrigger.create({animation:sc_img_m,trigger:".showcase__main",start:"top 60%",ease:"power1.out"}),ScrollTrigger.create({animation:sc_img_m,trigger:".showcase__title",start:"top 60%",toggleActions:"play none resume reset"}),ScrollTrigger.create({trigger:".points",start:"top 80%",end:"bottom -=100%",onEnter:()=>$(".points__list").addClass("on")}),ScrollTrigger.create({trigger:".showcase",start:"top 60%",onLeaveBack:()=>$(".points__list").removeClass("on")})}});var ess_title=gsap.timeline();ess_title.from(".ess__title",{opacity:0,y:100,duration:.5}),ess_title.from(".ess__info",{opacity:0,y:100,delay:.2},0),ess_title.from(".ess",{backgroundSize:"140% 140%",backgroundPosition:"45% 15%",ease:Sine.easeOut,duration:1.5},"-=0.5"),ScrollTrigger.matchMedia({"( min-width: 1024px )":function(){ScrollTrigger.create({animation:ess_title,trigger:".ess__title",scrub:1,end:"bottom 50%",ease:"power1.out"})},"( max-width: 1024px )":function(){ScrollTrigger.create({animation:ess_title,trigger:".ess",start:"top 60%",ease:"power1.out",toggleActions:"play reverse play reverse"})}});var ess_img=gsap.timeline();ess_img.from(".ess__img",{z:-100,x:40,y:20,duration:1.2,ease:"power1.inOut"}),ess_img.from(".ess__img-shadow",{opacity:0,x:-90,y:28,delay:.2,duration:1,ease:Linear.easeNone},0),ess_img.addLabel("jump"),ScrollTrigger.create({animation:ess_img,trigger:".ess__main",start:"top 70%",toggleActions:"play none play none"}),ScrollTrigger.create({animation:ess_img,trigger:".ess",start:"top 70%",toggleActions:"none none none reverse"});var articles_animation=gsap.timeline();articles_animation.to(".article__title",{opacity:1,duration:.5}),articles_animation.to("#at-bg1",{opacity:1,x:0,duration:1.5}),articles_animation.to("#at-main0",{opacity:0,x:0,duration:.8},"0.5"),articles_animation.to("#at-main1",{opacity:1,x:0,duration:1.2},"1.2"),articles_animation.to("#at-bg2",{opacity:1,x:0,duration:1.5},"+=1.2"),articles_animation.to("#at-main1",{opacity:0,x:0,duration:.8},"-=1.4"),articles_animation.to("#at-main2",{opacity:1,x:0,duration:1.2},"-=1"),articles_animation.to("#at-bg3",{opacity:1,x:0,duration:1.5},"+=1.2"),articles_animation.to("#at-main2",{opacity:0,x:0,duration:.8},"-=1.4"),articles_animation.to("#at-main3",{opacity:1,x:0,duration:1.2},"-=1"),articles_animation.to("#at-bg4",{opacity:1,x:0,duration:1.5},"+=1.2"),articles_animation.to("#at-main3",{opacity:0,x:0,duration:.8},"-=1.4"),articles_animation.to("#at-main4",{opacity:1,x:0,duration:1.2},"-=1"),articles_animation.to(".article__title",{opacity:1,duration:.5});var article_content=gsap.timeline();article_content.from(".article__title",{opacity:0,y:10,duration:1}),article_content.from(".article__main--camp",{opacity:0,y:10,duration:.5},"0.2"),article_content.to(".at-line1",{opacity:1,x:0,duration:.5},0),article_content.to(".at-line2",{opacity:1,y:0,duration:.5},0),article_content.to(".at-line3",{opacity:1,x:0,duration:.5},0),article_content.to(".at-line4",{opacity:1,y:0,duration:.5},0),article_content.from(".article__content-bg",{opacity:0,duration:.5},"-=0.2"),article_content.to(".article__content-line",{opacity:0,duration:.5},"-=0.3"),ScrollTrigger.matchMedia({"( min-width: 1024px )":function(){ScrollTrigger.create({trigger:".article",animation:articles_animation,pin:!0,scrub:1,start:()=>"0 "+getheaderHeight(),end:"bottom -=100%",ease:"quart.inOut",invalidateOnRefresh:!0}),ScrollTrigger.create({trigger:".article",animation:article_content,scrub:1,start:"top 70%",end:"top 100+=10%"})},"( max-width: 1024px )":function(){ScrollTrigger.create({trigger:".article",animation:articles_animation,pin:!0,scrub:1,start:()=>"0 "+getheaderHeight(),end:"bottom -=100%",ease:"quart.inOut"})}});var contact_animation=gsap.timeline();contact_animation.from(".contact__content",{opacity:0,duration:.7,ease:"power1.inOut"}),contact_animation.from(".contact__title",{opacity:0,y:40,duration:.45,ease:"power1.inOut"},"-=0.4"),contact_animation.from(".contact__text",{opacity:0,y:40,duration:.45,ease:"power1.inOut"},"-=0.3"),contact_animation.from(".contact__bottom",{opacity:0,y:40,duration:.45,ease:"power1.inOut"},"-=0.3"),ScrollTrigger.create({trigger:".contact",animation:contact_animation,start:"top 85%",end:"bottom +=80%",ease:"quart.inOut",toggleActions:"play none none reset"}),ScrollTrigger.matchMedia({"( min-width: 1024px )":function(){gsap.timeline({scrollTrigger:{trigger:".battery",start:"top top+=101px",end:"bottom top+=100px",toggleActions:"play reverse play reverse",toggleClass:{targets:".header__nav a[href$='battery']",className:"is-active"}}}),gsap.timeline({scrollTrigger:{trigger:".app",start:"top top+=101px",end:"bottom top+=100px",toggleActions:"play reverse play reverse",toggleClass:{targets:".header__nav a[href$='app']",className:"is-active"}}}),gsap.timeline({scrollTrigger:{trigger:".marker-contact",start:"top top+=101px",toggleClass:{targets:".header__nav a[href$='contact']",className:"is-active"}}})}});var header=gsap.timeline({scrollTrigger:{trigger:".wrap",start:"top top",end:"bottom -=500%",toggleClass:{targets:".header",className:"is-active"}}});function getScrollPos(t,a){t=t.labels.jump/t.totalDuration();return a.start+(a.end-a.start)*t}function stopIntro(){$("body").removeClass("is-intro"),$("body").addClass("is-loaded"),setTimeout(showIntro,500),setTimeout(allowScroll,1e3)}$(".header__logo-link, .footer__top").on("click",function(t){t.preventDefault(),gsap.to(window,1,{scrollTo:0})}),$(".header__menu-link").on("click",function(t){t.preventDefault();t=$(this).attr("href").split("#")[1];"battery"===t&&(isTabletSize()?gsap.to(window,{scrollTo:{y:"#battery",offsetY:getheaderHeight()}}):gsap.to(window,{scrollTo:{y:battery_animation.scrollTrigger.end}})),"app"===t&&gsap.to(window,{scrollTo:{y:"#app",offsetY:getheaderHeight()}}),"contact"===t&&gsap.to(window,{scrollTo:{y:"#contact",offsetY:getheaderHeight()}}),$(".header").hasClass("is-opened")&&(allowScroll(),$(".header").removeClass("is-opened"))}),$(window).on("beforeunload",function(){$(window).scrollTop(0)}),$(window).on("load",function(){gsap.to(window,1,{scrollTo:0}),$("body").addClass("is-intro"),preventScroll(),setTimeout(function(){stopIntro()},2e3),$(".intro").on("click",function(){stopIntro()}),$("#video").css("opacity",1)});